---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { BookOpen, Github, Tag, BookMarked } from '@lucide/astro';
import { SITE_NAME, AUTHOR_NAME, SOCIAL_LINKS } from '../../constants';

const tags = [
  'obsidian',
  'vue',
  'react',
  'vite',
  'javascript',
  'typescript',
  'Aastro' // Typo in the design, I'll keep it or fix it. Let's use 'astro'. Wait, design says 'Aastro' or 'javascript' and 'jjavascript'. I will use correct spellings.
];

const correctedTags = [
  'obsidian',
  'vue',
  'react',
  'vite',
  'javascript',
  'typescript',
  'Astro'
];

const recentReads = [
  { title: 'Obsidian çŸ¥è¯†åº“ç›®å½•ç»“æ„é‡æ„', time: '2 å°æ—¶å‰' },
  { title: 'Docker éƒ¨ç½²æœ¬åœ°æœåŠ¡çš„ç½‘ç»œé…ç½®', time: '2 å°æ—¶å‰' },
  { title: 'DDD é¢†åŸŸé©±åŠ¨è®¾è®¡å­¦ä¹ ç¬”è®°', time: '2 å°æ—¶å‰' },
];

// Mock GitHub contributions data (52 weeks, 7 days)
const weeks = Array.from({ length: 52 }, () =>
  Array.from({ length: 7 }, () => Math.random() > 0.7 ? Math.floor(Math.random() * 4) + 1 : 0)
);

const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
---

<BaseLayout title={`About | ${SITE_NAME}`} description="å…³äºæˆ‘å’Œæˆ‘çš„ä¸“ä¸šèƒŒæ™¯">
  <main class="max-w-6xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
    
    <div class="flex flex-col gap-6">
      
      <!-- Row 1 -->
      <div class="flex flex-col md:flex-row gap-6">
        
        <!-- Hero Card -->
        <div class="flex-[2] relative rounded-2xl bg-card border border-border p-8 sm:p-10 overflow-hidden shadow-sm group">
          <!-- Subtle green glow effect -->
          <div class="absolute inset-0 rounded-2xl border-2 border-primary/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"></div>
          <div class="absolute -inset-0.5 rounded-2xl bg-primary/5 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"></div>
          <div class="absolute inset-0 rounded-2xl ring-1 ring-primary/30 shadow-[0_0_20px_rgba(16,185,129,0.15)] pointer-events-none"></div>

          <div class="relative z-10 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-8 h-full">
            <div class="flex flex-col gap-4">
              <h1 class="text-4xl sm:text-5xl font-bold text-foreground">
                Hi, I'm {AUTHOR_NAME} <span class="inline-block origin-[70%_70%] animate-wave">ğŸ‘‹</span>
              </h1>
              <h2 class="text-xl sm:text-2xl font-semibold text-foreground mt-2">
                å…¨æ ˆå¼€å‘è€… / æ•°å­—å›­ä¸ / ç»ˆèº«å­¦ä¹ è€…
              </h2>
              <p class="text-muted-foreground leading-relaxed max-w-xl mt-2">
                æ¬¢è¿æ¥åˆ°æˆ‘çš„æ•°å­—ç”Ÿç‰©ç¾¤è½ã€‚è¿™é‡Œè®°å½•äº†æˆ‘çš„ä»£ç å®éªŒã€å…¨æ ˆå¼€å‘ç¬”è®°ä»¥åŠå­¦ä¹ æ—¥å¸¸ã€‚
              </p>
              
              <div class="flex flex-wrap gap-4 mt-6">
                <a href="/notes" class="btn-outline">
                  æµè§ˆç¬”è®° <BookOpen size={18} />
                </a>
                <a href={SOCIAL_LINKS.github} target="_blank" rel="noopener noreferrer" class="btn-outline">
                  GitHub <Github size={18} />
                </a>
              </div>
            </div>

            <!-- Avatar Circle -->
            <div class="hidden sm:block shrink-0">
              <div class="w-32 h-32 md:w-40 md:h-40 rounded-full bg-primary shadow-[0_0_40px_rgba(16,185,129,0.3)]"></div>
            </div>
          </div>
        </div>

        <!-- Knowledge Graph Nodes -->
        <div class="flex-[1] rounded-2xl bg-card border border-border p-6 sm:p-8 flex flex-col items-center shadow-sm">
          <h3 class="text-lg font-medium text-foreground mb-6">çŸ¥è¯†å›¾è°±èŠ‚ç‚¹</h3>
          <div class="flex flex-wrap justify-center gap-3">
            {correctedTags.map(tag => (
              <span class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-background-secondary border border-border text-sm text-foreground hover:border-primary/50 transition-colors cursor-default">
                {tag} <Tag size={14} class="text-primary" />
              </span>
            ))}
          </div>
        </div>
      </div>

      <!-- Row 2 -->
      <div class="flex flex-col md:flex-row gap-6">
        
        <!-- Recently Learning -->
        <div class="flex-[1] rounded-2xl bg-card border border-border p-6 sm:p-8 shadow-sm">
          <h3 class="text-lg font-medium text-foreground mb-6">æœ€è¿‘åœ¨äº†è§£</h3>
          <div class="flex flex-col gap-4">
            {recentReads.map(item => (
              <a href="/notes" class="group flex items-center justify-between p-4 rounded-xl bg-background-secondary hover:bg-card-hover border border-transparent hover:border-border transition-all">
                <div class="flex flex-col gap-1">
                  <h4 class="text-foreground font-medium group-hover:text-primary transition-colors">{item.title}</h4>
                  <span class="text-xs text-muted-foreground">æ›´æ–°äº {item.time}</span>
                </div>
                <BookMarked size={20} class="text-primary shrink-0 opacity-80 group-hover:opacity-100 transition-opacity" />
              </a>
            ))}
          </div>
        </div>

        <!-- GitHub Contributions -->
        <div class="flex-[2] rounded-2xl bg-card border border-border p-6 sm:p-8 shadow-sm overflow-hidden flex flex-col">
          <div class="flex items-center justify-between mb-6">
            <h3 class="text-lg font-medium text-foreground hidden sm:block">GitHub Contributions</h3>
            <div class="flex items-center gap-4 w-full sm:w-auto justify-end">
              <a href={SOCIAL_LINKS.github} target="_blank" rel="noopener noreferrer" class="btn-outline-sm">
                GitHub <Github size={16} />
              </a>
            </div>
          </div>

          <div class="flex-1 bg-background-secondary rounded-xl p-4 overflow-x-auto border border-border">
            <div class="min-w-[700px]">
              <!-- Months -->
              <div class="flex justify-between text-xs text-muted-foreground ml-8 mb-2">
                {months.map(month => <span>{month}</span>)}
              </div>
              
              <!-- Graph -->
              <div class="flex gap-1">
                <!-- Days of week -->
                <div class="flex flex-col gap-1 text-[10px] text-muted-foreground justify-between py-1 mr-2 shrink-0">
                  <span>Mon</span>
                  <span>Wed</span>
                  <span>Fri</span>
                </div>
                
                <!-- Matrix -->
                <div class="flex gap-1 flex-1">
                  {weeks.map(week => (
                    <div class="flex flex-col gap-1 flex-1">
                      {week.map(day => (
                        <div class={`w-3 h-3 rounded-sm ${
                          day === 0 ? 'bg-card' :
                          day === 1 ? 'bg-primary/30' :
                          day === 2 ? 'bg-primary/60' :
                          day === 3 ? 'bg-primary/80' :
                          'bg-primary'
                        } border border-border/50`}></div>
                      ))}
                    </div>
                  ))}
                </div>
              </div>

              <!-- Legend -->
              <div class="flex items-center justify-between text-xs text-muted-foreground mt-4">
                <a href="#" class="hover:text-primary transition-colors">Learn how we count contributions</a>
                <div class="flex items-center gap-1.5">
                  <span>Less</span>
                  <div class="flex gap-1">
                    <div class="w-3 h-3 rounded-sm bg-card border border-border/50"></div>
                    <div class="w-3 h-3 rounded-sm bg-primary/30 border border-border/50"></div>
                    <div class="w-3 h-3 rounded-sm bg-primary/60 border border-border/50"></div>
                    <div class="w-3 h-3 rounded-sm bg-primary/80 border border-border/50"></div>
                    <div class="w-3 h-3 rounded-sm bg-primary border border-border/50"></div>
                  </div>
                  <span>More</span>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </main>
</BaseLayout>

<style>
  @keyframes wave {
    0% { transform: rotate(0.0deg) }
    10% { transform: rotate(14.0deg) }
    20% { transform: rotate(-8.0deg) }
    30% { transform: rotate(14.0deg) }
    40% { transform: rotate(-4.0deg) }
    50% { transform: rotate(10.0deg) }
    60% { transform: rotate(0.0deg) }
    100% { transform: rotate(0.0deg) }
  }
  .animate-wave {
    animation: wave 2.5s infinite;
  }
</style>
