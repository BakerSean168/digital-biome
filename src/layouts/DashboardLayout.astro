---
/**
 * Dashboard å¸ƒå±€ - æµè§ˆå™¨å¯åŠ¨é¡µé£æ ¼
 * ç‰¹ç‚¹ï¼šæç®€ã€æ— å¹²æ‰°ã€å·¥å…·ä¼˜å…ˆ
 */
import ThemeIcon from '../components/common/ThemeIcon.astro';
import '../styles/global.css';

interface Props {
  title?: string;
}

const { title = 'Dashboard' } = Astro.props;

// è·å–å½“å‰æ—¶é—´æ®µçš„é—®å€™è¯­
const getGreeting = () => {
  const hour = new Date().getHours();
  if (hour < 6) return 'å¤œæ·±äº†';
  if (hour < 12) return 'æ—©ä¸Šå¥½';
  if (hour < 14) return 'ä¸­åˆå¥½';
  if (hour < 18) return 'ä¸‹åˆå¥½';
  return 'æ™šä¸Šå¥½';
};
---

<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{title}</title>
  </head>
  <body class="dashboard-body">
    <div class="dashboard-container">
      <!-- é¡¶éƒ¨å·¥å…·æ  -->
      <nav class="dashboard-nav">
        <a href="/home" class="nav-link">ğŸ  ä¸»é¡µ</a>
        <a href="/wiki" class="nav-link">ğŸ“š çŸ¥è¯†åº“</a>
        <a href="/blog" class="nav-link">âœï¸ åšå®¢</a>
        <a href="/resume" class="nav-link">ğŸ‘¤ ç®€å†</a>
        <ThemeIcon />
      </nav>

      <!-- ä¸»å†…å®¹åŒº -->
      <main class="dashboard-main">
        <slot />
      </main>

      <!-- åº•éƒ¨çŠ¶æ€ -->
      <footer class="dashboard-footer">
        <span class="time" id="current-time"></span>
      </footer>
    </div>

    <script>
      // æ›´æ–°æ—¶é—´æ˜¾ç¤º
      function updateTime() {
        const el = document.getElementById('current-time');
        if (el) {
          const now = new Date();
          el.textContent = now.toLocaleTimeString('zh-CN', { 
            hour: '2-digit', 
            minute: '2-digit' 
          });
        }
      }
      updateTime();
      setInterval(updateTime, 1000);
    </script>
  </body>
</html>

<style>
  .dashboard-body {
    margin: 0;
    min-height: 100vh;
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    color: #e8e8e8;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }

  :global(html.dark) .dashboard-body {
    background: linear-gradient(135deg, #0d0d0d 0%, #1a1a1a 50%, #2d2d2d 100%);
  }

  .dashboard-container {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  .dashboard-nav {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 1.5rem;
    padding: 1rem 2rem;
  }

  .nav-link {
    color: rgba(255, 255, 255, 0.7);
    text-decoration: none;
    font-size: 0.9rem;
    transition: color 0.2s;
  }

  .nav-link:hover {
    color: #fff;
  }

  .dashboard-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem;
  }

  .dashboard-footer {
    text-align: center;
    padding: 1rem;
    color: rgba(255, 255, 255, 0.4);
  }

  .time {
    font-size: 0.85rem;
    font-variant-numeric: tabular-nums;
  }
</style>
