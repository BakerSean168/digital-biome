---
import { getBookmarksByCategory } from '../../utils/notes';
import BookmarkCategory from './BookmarkCategory.astro';

const bookmarksByCategory = await getBookmarksByCategory();
const hasBookmarks = bookmarksByCategory.size > 0;
---

<div class="w-full max-w-5xl mx-auto pb-20 relative z-10 px-4 md:px-0">
  {hasBookmarks
    ? Array.from(bookmarksByCategory.entries()).map(([category, bookmarks]) => (
        <BookmarkCategory name={category} bookmarks={bookmarks} />
      ))
    : (
      <div class="text-center py-12 text-muted-foreground">
        <p class="mb-2">还没有书签</p>
        <p class="text-sm">在笔记中添加 <code class="bg-card-hover px-1.5 py-0.5 rounded text-xs">url</code> 字段和 <code class="bg-card-hover px-1.5 py-0.5 rounded text-xs">website/&lt;分类&gt;</code> 标签即可在此显示</p>
      </div>
    )
  }
</div>
